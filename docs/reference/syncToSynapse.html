<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>syncToSynapse — syncToSynapse • synapserutils</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="syncToSynapse — syncToSynapse"><meta property="og:description" content="Synchronizes files specified in the manifest file to Synapse.
Given a file describing all of the uploads, this uploads the content to Synapse and
optionally notifies you via Synapse messagging (email) at specific intervals, on
errors and on completion."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">synapserutils</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/Sage-Bionetworks/synapserutils/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>syncToSynapse</h1>
    
    <div class="hidden name"><code>syncToSynapse.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Synchronizes files specified in the manifest file to Synapse.</p>
<p>Given a file describing all of the uploads, this uploads the content to Synapse and
optionally notifies you via Synapse messagging (email) at specific intervals, on
errors and on completion.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">syncToSynapse</span><span class="op">(</span><span class="va">manifestFile</span>, dryRun<span class="op">=</span><span class="cn">FALSE</span>, sendMessages<span class="op">=</span><span class="cn">TRUE</span>, retries<span class="op">=</span><span class="fl">4</span>, merge_existing_annotations<span class="op">=</span><span class="cn">TRUE</span>, associate_activity_to_new_version<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>manifestFile</dt>
<dd><p>A tsv file with file locations and metadata<br>
                      to be pushed to Synapse.  See Details for manifest file format.</p></dd>

<dt>dryRun</dt>
<dd><p>Performs validation without uploading if set to True. Defaults to FALSE.)</p></dd>

<dt>sendMessages</dt>
<dd><p>Sends out messages on completion if set to True. Defaults to TRUE.</p></dd>

<dt>retries</dt>
<dd><p>Number of retries to attempt if an error occurs. Defaults to 4.</p></dd>

<dt>merge_existing_annotations</dt>
<dd><p>If True, will merge the annotations in the manifest file with the existing annotations on Synapse. If False, will overwrite the existing annotations on Synapse with the annotations in the manifest file. Defaults to TRUE.</p></dd>

<dt>associate_activity_to_new_version</dt>
<dd><p>If True, and a version update occurs, the existing activity in Synapse will be associated with the new version. The exception is if you are specifying new values to be used/executed, it will create a new activity for the new version of the entity. Defaults to FALSE.</p></dd>



</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p><!-- % A detailed if possible precise description of the functionality provided, extending the basic information in the \description slot. -->
Manifest File Format:</p>
<p>The format of the manifest file is a tab delimited file with one row per file to upload and columns describing the file. The minimum required columns are path and parent where path is the local file path and parent is the synapse Id of the project or folder where the file is uploaded to. In addition to these columns you can specify any of the parameters to the File constructor (name, synapseStore, contentType) as well as parameters to the syn.store command (used, executed, activityName, activityDescription, forceVersion). Used and executed can be semi-colon (”;”) separated lists of Synapse ids, urls and/or local filepaths of files already stored in Synapse (or being stored in Synapse by the manifest). Any additional columns will be added as annotations.</p>
<p>Required fields:</p>
<table class="table table"><tr><td>Field</td><td>Meaning</td><td>Example</td></tr><tr><td>path</td><td>local file path or URL</td><td>/path/to/local/file.txt</td></tr><tr><td>parent</td><td>synapse id</td><td>syn1235</td></tr></table><p>Common fields:</p>
<table class="table table"><tr><td>Field</td><td>Meaning</td><td>Example</td></tr><tr><td>name</td><td>name of file in Synapse</td><td>Example_file</td></tr><tr><td>forceVersion</td><td>whether to update version</td><td>False</td></tr></table><p>Provenance fields:</p>
<table class="table table"><tr><td>Field</td><td>Meaning</td><td>Example</td></tr><tr><td>used</td><td>List of items used to generate file</td><td>syn1235; /path/to_local/file.txt</td></tr><tr><td>executed</td><td>List of items exectued</td><td>https://github.org/; /path/to_local/code.py</td></tr><tr><td>activityName</td><td>Name of activity in provenance</td><td>“Ran normalization”</td></tr><tr><td>activityDescription</td><td>Text description on what was done</td><td>“Ran algorithm xyx with parameters...”</td></tr></table><p>Annotations:</p>
<p>Any columns that are not in the reserved names described above will be intepreted as annotations of the file.</p>
<p>Other optional fields:</p>
<table class="table table"><tr><td>Field</td><td>Meaning</td><td>Example</td></tr><tr><td>synapseStore</td><td>Boolean describing whether to upload files</td><td>True</td></tr><tr><td>contentType</td><td>content type of file to overload defaults</td><td>text/html</td></tr></table><p>Example manifest file:</p>
<table class="table table"><tr><td>path</td><td>parent</td><td>annot1</td><td>annot2</td><td>used</td><td>executed</td></tr><tr><td>/path/file1.txt</td><td>syn1243</td><td>“bar”</td><td>3.1415</td><td>“syn124; /path/file2.txt”</td><td>“https://github.org/foo/bar“</td></tr><tr><td>/path/file2.txt</td><td>syn12433</td><td>“baz”</td><td>2.71</td><td>“”</td><td>“https://github.org/foo/baz“</td></tr></table></div>
    <div id="value">
    <h2>Value</h2>
    


    </div>
    <div id="references">
    <h2>References</h2>
    <p><!-- % A section with references to the literature. Use \url{} or \href{}{} for web pointers. --></p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p><!-- % Use this for a special note you want to have pointed out. --></p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><!-- % Pointers to related R objects, using \code{\link{...}} to refer to them. --></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span>  <span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="co"># synchronizes files</span></span></span>
<span class="r-in"><span>    <span class="fu">syncToSynapse</span><span class="op">(</span><span class="st">"/path/to/manifest.tsv"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    </span></span>
<span class="r-in"><span>    <span class="co"># add an annotation</span></span></span>
<span class="r-in"><span>    <span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table</a></span><span class="op">(</span><span class="st">'/path/to/manifest.tsv'</span>, header <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="va">df</span><span class="op">[</span><span class="st">"species"</span><span class="op">]</span> <span class="op">=</span> <span class="st">"Homo sapiens"</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.table</a></span><span class="op">(</span><span class="va">df</span>, file<span class="op">=</span><span class="st">'/path/to/manifest.tsv'</span>, sep<span class="op">=</span><span class="st">'\t'</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="fu">syncToSynapse</span><span class="op">(</span><span class="st">'/path/to/manifest.tsv'</span><span class="op">)</span></span></span>
<span class="r-in"><span>    </span></span>
<span class="r-in"><span>    <span class="co"># update the annotation</span></span></span>
<span class="r-in"><span>    <span class="va">df</span><span class="op">[</span><span class="st">"species"</span><span class="op">]</span> <span class="op">=</span> <span class="st">"Human"</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.table</a></span><span class="op">(</span><span class="va">df</span>, file<span class="op">=</span><span class="st">'/path/to/manifest.tsv'</span>, sep<span class="op">=</span><span class="st">'\t'</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="fu">syncToSynapse</span><span class="op">(</span><span class="st">'/path/to/manifest.tsv'</span>, merge_existing_annotations <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span>    </span></span>
<span class="r-in"><span>    <span class="co"># overwrite the annotation</span></span></span>
<span class="r-in"><span>    <span class="va">df</span><span class="op">[</span><span class="st">"species"</span><span class="op">]</span> <span class="op">=</span> <span class="st">"Homo sapiens"</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.table</a></span><span class="op">(</span><span class="va">df</span>, file<span class="op">=</span><span class="st">'/path/to/manifest.tsv'</span>, sep<span class="op">=</span><span class="st">'\t'</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="fu">syncToSynapse</span><span class="op">(</span><span class="st">'/path/to/manifest.tsv'</span>, merge_existing_annotations <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span>    </span></span>
<span class="r-in"><span>    <span class="co"># create an Activity/Provenance for the first files</span></span></span>
<span class="r-in"><span>    <span class="co"># create a relationship between two files. </span></span></span>
<span class="r-in"><span>    <span class="co"># In this example, the second file in the manifest is used to generate the first file</span></span></span>
<span class="r-in"><span>    <span class="va">df</span><span class="op">[</span><span class="fl">1</span>, <span class="st">"used"</span><span class="op">]</span> <span class="op">=</span> <span class="va">df</span><span class="op">[</span><span class="fl">2</span>,<span class="op">]</span><span class="op">$</span><span class="va">path</span> </span></span>
<span class="r-in"><span>    </span></span>
<span class="r-in"><span>    <span class="co"># link to the tool that is used to produce the results in the first file</span></span></span>
<span class="r-in"><span>    <span class="va">df</span><span class="op">[</span><span class="fl">1</span>, <span class="st">"executed"</span><span class="op">]</span> <span class="op">=</span> <span class="st">"https://nf-co.re/rnaseq/3.14.0"</span></span></span>
<span class="r-in"><span>    </span></span>
<span class="r-in"><span>    <span class="co"># add a description for this Activity/Provenance</span></span></span>
<span class="r-in"><span>    <span class="va">df</span><span class="op">[</span><span class="fl">1</span>, <span class="st">"activityDescription"</span><span class="op">]</span> <span class="op">=</span> <span class="st">"Experiment results created as a result of the linked data while running the pipeline."</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.table</a></span><span class="op">(</span><span class="va">df</span>, file<span class="op">=</span><span class="st">'/path/to/manifest.tsv'</span>, sep<span class="op">=</span><span class="st">'\t'</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="fu">syncToSynapse</span><span class="op">(</span><span class="st">'/path/to/manifest.tsv'</span><span class="op">)</span></span></span>
<span class="r-in"><span>    </span></span>
<span class="r-in"><span>    <span class="co"># associate Activity/Provenance with the newer version </span></span></span>
<span class="r-in"><span>    <span class="co"># after changing the content or metadata of the file</span></span></span>
<span class="r-in"><span>    <span class="fu">syncToSynapse</span><span class="op">(</span><span class="st">'/path/to/manifest.tsv'</span>, associate_activity_to_new_version<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Dan Lu, Thomas Yu.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

